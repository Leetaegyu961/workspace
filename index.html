<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë¡œë˜ ë²ˆí˜¸ ì¶”ì²œê¸°</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#0f1a33;
      --text:#e8eefc;
      --muted:#aab6d6;
      --line:rgba(255,255,255,.12);
      --accent:#7c9dff;
      --accent2:#38d6b3;
      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --radius: 18px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f8ff;
        --card:#ffffff;
        --text:#0b1220;
        --muted:#4b587a;
        --line:rgba(11,18,32,.12);
        --accent:#3b5cff;
        --accent2:#0ea27f;
        --shadow: 0 18px 60px rgba(20,30,60,.12);
      }
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", AppleSDGothicNeo, "Malgun Gothic", sans-serif;
      background:
        radial-gradient(900px 500px at 15% 10%, rgba(124,157,255,.25), transparent 60%),
        radial-gradient(800px 450px at 85% 20%, rgba(56,214,179,.18), transparent 55%),
        var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    .wrap{max-width:820px;margin:0 auto;padding:28px 18px 52px}
    header{
      display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
      padding:8px 2px 18px;
    }
    .brand{display:flex;align-items:center;gap:10px}
    .logo{
      width:42px;height:42px;border-radius:14px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: var(--shadow);
      position:relative; overflow:hidden;
    }
    .logo:after{
      content:""; position:absolute; inset:-35%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.55), transparent 55%);
      transform: rotate(15deg);
    }
    h1{font-size:16px;margin:0}
    .sub{margin:0;color:var(--muted);font-size:12px}
    .card{
      background: rgba(255,255,255,.05);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .top{
      padding:18px 18px 14px;
      border-bottom:1px solid var(--line);
      background: rgba(255,255,255,.04);
      display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
    }
    .top h2{margin:0;font-size:14px;color:var(--muted);letter-spacing:.02em;text-transform:uppercase}
    .controls{display:flex;gap:10px;flex-wrap:wrap}
    button{
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      display:inline-flex;align-items:center;gap:8px;
      transition: transform .08s ease, background .15s ease, opacity .15s ease;
      user-select:none;
    }
    button:hover{transform: translateY(-1px); background:rgba(255,255,255,.10)}
    button.primary{
      border:0;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:#071021;
      font-weight:800;
    }
    button:disabled{opacity:.55; cursor:not-allowed; transform:none}
    .body{padding:18px}
    .balls{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      min-height:58px;
    }
    .ball{
      width:54px;height:54px;border-radius:999px;
      display:flex;align-items:center;justify-content:center;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      font-weight:900;
      font-size:18px;
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
      transform: translateY(6px) scale(.98);
      opacity:0;
      animation: pop .35s ease forwards;
    }
    @keyframes pop{
      to{transform: translateY(0) scale(1); opacity:1}
    }
    .meta{
      margin-top:12px;
      display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;
      color:var(--muted); font-size:12px;
    }
    .history{
      margin-top:14px;
      border-top:1px solid var(--line);
      padding-top:14px;
    }
    .history h3{margin:0 0 10px;font-size:13px;color:var(--muted)}
    .hist-list{display:grid; gap:8px; margin:0; padding:0; list-style:none}
    .hist-item{
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
      border:1px solid var(--line);
      background: rgba(255,255,255,.04);
      border-radius:14px;
      padding:10px 12px;
    }
    .hist-left{display:flex; gap:8px; flex-wrap:wrap}
    .mini{
      width:28px;height:28px;border-radius:999px;
      display:inline-flex;align-items:center;justify-content:center;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      font-weight:800;
      font-size:12px;
    }
    .hist-time{color:var(--muted); font-size:12px}
    .note{color:var(--muted); font-size:12px; margin:0}
    footer{margin-top:16px;color:var(--muted);font-size:12px;padding:0 2px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>ë¡œë˜ ë²ˆí˜¸ ì¶”ì²œê¸°</h1>
          <p class="sub">ë²„íŠ¼ í•œ ë²ˆì— 6/45 ëœë¤ ì¶”ì²œ (ì¤‘ë³µ ì—†ìŒ)</p>
        </div>
      </div>
      <div style="color:var(--muted);font-size:12px">ğŸ² ì™„ì „ ëœë¤ì…ë‹ˆë‹¤</div>
    </header>

    <section class="card" aria-label="ë¡œë˜ ì¶”ì²œ">
      <div class="top">
        <h2>ì¶”ì²œ ë²ˆí˜¸</h2>
        <div class="controls">
          <button class="primary" id="btnPick">ë²ˆí˜¸ ì¶”ì²œ</button>
          <button id="btnPick5" title="5ì„¸íŠ¸ í•œë²ˆì— ìƒì„±">5ì„¸íŠ¸</button>
          <button id="btnCopy" title="í˜„ì¬ ì¶”ì²œ ë²ˆí˜¸ ë³µì‚¬" disabled>ë³µì‚¬</button>
          <button id="btnReset" title="ê¸°ë¡ ì´ˆê¸°í™”">ì´ˆê¸°í™”</button>
        </div>
      </div>

      <div class="body">
        <div class="balls" id="balls" aria-live="polite"></div>
        <div class="meta">
          <span id="status">ì•„ì§ ì¶”ì²œ ì—†ìŒ</span>
          <span>ë²”ìœ„: 1 ~ 45 Â· 6ê°œ</span>
        </div>

        <div class="history" id="historyBox" hidden>
          <h3>ìµœê·¼ ì¶”ì²œ (ìµœëŒ€ 10ê°œ)</h3>
          <ul class="hist-list" id="histList"></ul>
          <p class="note">â€» ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëƒ¥ ì¬ë¯¸ë¡œë§Œ!</p>
        </div>
      </div>
    </section>

    <footer>
      íŒ: â€œ5ì„¸íŠ¸â€ë¡œ ì—¬ëŸ¬ ì¥ ì‚´ ë•Œ í•œ ë²ˆì— ë½‘ê³ , ë§ˆìŒì— ë“œëŠ” ì„¸íŠ¸ë§Œ ë³µì‚¬í•´ì„œ ì“°ë©´ í¸í•¨.
    </footer>
  </div>

  <script>
    // ====== ë¡œë˜ ë¡œì§ ======
    const RANGE_MIN = 1;
    const RANGE_MAX = 45;
    const PICK_COUNT = 6;
    const HISTORY_LIMIT = 10;

    const $balls = document.getElementById('balls');
    const $status = document.getElementById('status');
    const $btnPick = document.getElementById('btnPick');
    const $btnPick5 = document.getElementById('btnPick5');
    const $btnCopy = document.getElementById('btnCopy');
    const $btnReset = document.getElementById('btnReset');
    const $historyBox = document.getElementById('historyBox');
    const $histList = document.getElementById('histList');

    let current = null;      // í˜„ì¬ ì¶”ì²œ ë²ˆí˜¸ ë°°ì—´
    let history = [];        // { nums: number[], time: Date }

    function randInt(min, max){
      // cryptoê°€ ìˆìœ¼ë©´ ë” ì¢‹ì€ ë‚œìˆ˜ ì‚¬ìš©
      if (window.crypto && window.crypto.getRandomValues) {
        const arr = new Uint32Array(1);
        window.crypto.getRandomValues(arr);
        return min + (arr[0] % (max - min + 1));
      }
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function pickOneSet(){
      const set = new Set();
      while(set.size < PICK_COUNT){
        set.add(randInt(RANGE_MIN, RANGE_MAX));
      }
      return Array.from(set).sort((a,b)=>a-b);
    }

    function formatNums(nums){
      return nums.join(', ');
    }

    function renderBalls(nums){
      $balls.innerHTML = '';
      nums.forEach((n, i) => {
        const b = document.createElement('div');
        b.className = 'ball';
        b.style.animationDelay = (i * 60) + 'ms';
        b.textContent = n;
        $balls.appendChild(b);
      });
    }

    function addHistory(nums){
      history.unshift({ nums, time: new Date() });
      history = history.slice(0, HISTORY_LIMIT);
      renderHistory();
    }

    function renderHistory(){
      if(history.length === 0){
        $historyBox.hidden = true;
        $histList.innerHTML = '';
        return;
      }
      $historyBox.hidden = false;
      $histList.innerHTML = '';

      history.forEach((h) => {
        const li = document.createElement('li');
        li.className = 'hist-item';

        const left = document.createElement('div');
        left.className = 'hist-left';

        h.nums.forEach(n => {
          const m = document.createElement('span');
          m.className = 'mini';
          m.textContent = n;
          left.appendChild(m);
        });

        const right = document.createElement('div');
        right.className = 'hist-time';
        right.textContent = h.time.toLocaleString();

        li.appendChild(left);
        li.appendChild(right);

        // í´ë¦­í•˜ë©´ ê·¸ ì„¸íŠ¸ê°€ í˜„ì¬ ì¶”ì²œìœ¼ë¡œ ì˜¬ë¼ì˜¤ê²Œ
        li.style.cursor = 'pointer';
        li.title = 'í´ë¦­í•´ì„œ ì´ ì„¸íŠ¸ë¥¼ ë‹¤ì‹œ ì„ íƒ';
        li.addEventListener('click', () => {
          current = h.nums.slice();
          renderBalls(current);
          $status.textContent = 'ì„ íƒë¨: ' + formatNums(current);
          $btnCopy.disabled = false;
        });

        $histList.appendChild(li);
      });
    }

    function setBusy(isBusy){
      $btnPick.disabled = isBusy;
      $btnPick5.disabled = isBusy;
      $btnReset.disabled = isBusy;
      // ë³µì‚¬ëŠ” í˜„ì¬ê°’ì´ ì—†ìœ¼ë©´ ì›ë˜ disabled ìœ ì§€
      if (isBusy) $btnCopy.disabled = true;
      else $btnCopy.disabled = !current;
    }

    function doPickOne(){
      current = pickOneSet();
      renderBalls(current);
      addHistory(current);
      $status.textContent = 'ì¶”ì²œë¨: ' + formatNums(current);
      $btnCopy.disabled = false;
    }

    async function doPickFive(){
      // 5ì„¸íŠ¸ëŠ” ê¸°ë¡ì— 5ê°œ ìŒ“ì´ê²Œ í•˜ê³ , ë§ˆì§€ë§‰ ì„¸íŠ¸ë¥¼ í˜„ì¬ë¡œ ë³´ì—¬ì¤Œ
      setBusy(true);
      $status.textContent = '5ì„¸íŠ¸ ìƒì„± ì¤‘...';

      for(let i=0; i<5; i++){
        const nums = pickOneSet();
        addHistory(nums);
        current = nums;
        renderBalls(current);
        $status.textContent = `(${i+1}/5) ${formatNums(current)}`;
        await new Promise(r => setTimeout(r, 220));
      }
      $status.textContent = '5ì„¸íŠ¸ ì™„ë£Œ: ' + formatNums(current);
      setBusy(false);
    }

    async function copyCurrent(){
      if(!current) return;
      const text = formatNums(current);
      try{
        await navigator.clipboard.writeText(text);
        const prev = $btnCopy.textContent;
        $btnCopy.textContent = 'ë³µì‚¬ë¨';
        setTimeout(()=> $btnCopy.textContent = prev, 700);
      }catch(e){
        // clipboard ê¶Œí•œ ì‹¤íŒ¨ ì‹œ fallback
        prompt('ë³µì‚¬ê°€ ë§‰í˜€ìˆì–´. ì•„ë˜ë¥¼ ë³µì‚¬í•´:', text);
      }
    }

    function resetAll(){
      current = null;
      history = [];
      $balls.innerHTML = '';
      $status.textContent = 'ì´ˆê¸°í™”ë¨';
      $btnCopy.disabled = true;
      renderHistory();
    }

    // ====== ì´ë²¤íŠ¸ ======
    $btnPick.addEventListener('click', doPickOne);
    $btnPick5.addEventListener('click', doPickFive);
    $btnCopy.addEventListener('click', copyCurrent);
    $btnReset.addEventListener('click', resetAll);
  </script>
</body>
</html>